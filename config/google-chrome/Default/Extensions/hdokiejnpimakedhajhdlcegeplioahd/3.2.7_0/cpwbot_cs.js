var CPWbot_cs;CPWbot_cs||(CPWbot_cs=new CPWbot_cs_lib);
function CPWbot_cs_lib(){var a=this;this.JSON=JSON;JSON||(this.JSON=LPJSON);this.alert=alert;this.fill_field=function(b,c){b||(b=LP_derive_doc());if(!c||!b)return!1;var d=0,a=this.getElementByType(b,c);a?(verbose_log(sprintf("filling element ty=%s val=%s should_click=%d should_fill_via_keys=%d",c.id_type,c.id_value,c.should_click,c.should_fill_via_keys)),a.focus(),c.should_click&&(CPWbot_cs.do_click(b,a),"function"==typeof sendKey&&sendKey("Z",a),fire_onchange(a,!0,!0)),c.should_fill_via_keys&&g_isfirefox?
fill_field_via_keys(a,c.field_value):a.value=c.field_value,fire_onchange(a),d=1):verbose_log("unable to find element ty="+c.id_type+" val="+c.id_value);sendBG({cmd:"cpwbot_fill_ack",url:get_doc_location_href(b),docstate:b.readyState,req_id:c.req_id,id_type:c.id_type,id_value:c.id_value,found:d?1:0,should_click:c.should_click,should_fill_via_keys:c.should_fill_via_keys},b);return!0};this.click_field=function(b,c){b||(b=LP_derive_doc());if(!c||!b)return!1;var a=this.getElementByType(b,c),e=0;a?(verbose_log("[docnum:"+
getmydocnum(b)+"][state:"+c.pwchangestate+"] clicking element ty="+c.id_type+" val="+c.id_value),this.do_click(b,a),e=1):verbose_log("[docnum:"+getmydocnum(b)+"][state:"+c.pwchangestate+"] unable to find element in this frame to click : ty="+c.id_type+" val="+c.id_value);sendBG({cmd:"cpwbot_click_ack",url:get_doc_location_href(b),docstate:b.readyState,pwchangestate:c.pwchangestate,msgid:c.msgid,id_type:c.id_type,id_value:c.id_value,found:e?1:0},b);return!0};this.execute_script=function(b,c){b||(b=
LP_derive_doc());if(!c||!b||!Math)return!1;if(!g_isfirefox||!b||b.defaultView){var a=c.js,e=c.hash,g=null;if(a){var h=a,j;j="function"==typeof fasthash?fasthash:"function"==typeof crc32?crc32:"function(j) { if (j) { return j.length; } return 0; }";verbose_log(sprintf("comparing %s with %s",e,j(h)));if(e!=j(h))return console_error("failed javascript consistency check"),!1;e="__lpresult"+Math.floor(Math.random()*Math.pow(2,31));verbose_log("["+getmydocnum(b)+"] executing JS: "+a);a=null===b.body?"try{"+
a+"}catch(e) { }":"try {"+sprintf("var _res = document.getElementById('%s');  if (!_res) { _res = document.createElement('div');  _res.id='%s'; _res.style.display='none'; _res.style.left='-1000px'; document.body.appendChild(_res); } { ",e,e)+a+"} if (_res) { if (typeof(_res.innerText) != 'undefined') { _res.innerText = document._g_result; } else { _res.textContent = document._g_result; } document._g_result = null; }} catch(e) { }";run_custom_js(b,a);if(a=b.getElementById(e))g=LP_elt_get_text(a),"undefined"==
typeof g&&(g=null),a.parentElement.removeChild(a)}sendBG({cmd:"cpwbot_js_ack",url:get_doc_location_href(b),docstate:b.readyState,req_id:c.req_id,result:CPWbot_cs.JSON.stringify(g)},b);return!0}};this.getElementByType=function(b,c){b||(b=LP_derive_doc());if(!c||!b||g_isfirefox&&b&&!b.defaultView)return null;var a=null,e=null,e=c.id_type,g=c.id_value,h=666;if(e&&g)switch(e){case "id":a=b.getElementById(g);break;case "name":(e=b.getElementsByName(g))&&0<e.length&&(a=e[0]);break;case "xpath":g_isie&&
"undefined"!=typeof init_LPfn&&(init_LPfn()&&LPfn)&&(h=LPfn.getDocumentMode(b));8>h?alert("old IE - does not bundle in XPATH support. TODO "):a=LP_getElementByXPath(b,g);break;default:!0}return a};this.getElementsByType=function(b,a){b||(b=LP_derive_doc());if(!a||!b)return null;var d=null,e=[],d=a.id_type,g=a.id_value,h=666;if(d&&g)switch(d){case "id":(d=b.getElementById(g))&&e.push(d);break;case "name":e=b.getElementsByName(g);break;case "xpath":g_isie&&"undefined"!=typeof init_LPfn&&(init_LPfn()&&
LPfn)&&(h=LPfn.getDocumentMode(b));8>h?this.alert("old IE - does not bundle in XPATH support. TODO "):e=LP_getElementsByXPath(b,g);break;default:!0}return e};this.field_is_displayed=function(b,a){b||(b=LP_derive_doc());return!a||!b?!1:lpIsVisible(a)?!0:!1};this.do_click=function(b,a){b||(b=LP_derive_doc());if(!a||!b)return!1;"undefined"!=typeof a.disabled&&a.disabled&&(a.disabled=!1);a.focus();g_isfirefox?fireEvent(b,a,"click","MouseEvents"):LP_fireEvent(a,"click","MouseEvents");return!0};this.decode_fields_metainfo=
function(b){var a="";b&&(a=this.JSON.parse(b));return a};this.validate_page_fields=function(b,c,d,e,g,h,j,k){if(!b)return null;g=!0;var f={};verbose_log("running validate_page_fields in frame "+getmydocnum(b)+" for "+c);d||(d=[]);e||(e=[]);k||(k=[]);c=!1;var p=0,l=0,q=0,r=0,m;if(h){m=RegExp(h,"i");var n=punycode.URLToASCII(b.location.href);if(m.exec(n))return f.num_ok_matches=null,f.num_okfields=null,f.found_bad_match=null,f.num_badfields=null,f.url_success_match=!0,f.url_failure_match=!1,f.do_retry=
!1,f.retval=!0,f.found_interactive=!1,verbose_log("["+getmydocnum(b)+"] returning true, matched success url "+h),g_isdebug&&(set_innertext(f,LP_elt_get_text(b.body)),f.innerHTML=b.body.innerHTML),f}if(j&&(m=RegExp(j,"i"),n=punycode.URLToASCII(b.location.href),m.exec(n)))return f.num_ok_matches=null,f.num_okfields=null,f.found_bad_match=null,f.num_badfields=null,f.url_failure_match=!0,f.url_success_match=!1,f.do_retry=!1,f.retval=!1,f.found_interactive=!1,verbose_log("["+getmydocnum(b)+"] returning false, matched failure url "+
j),g_isdebug&&(set_innertext(f,LP_elt_get_text(b.body)),f.innerHTML=b.body.innerHTML),f;for(h=0;h<d.length;h++)if(j=d[h].id_type,m=d[h].id_value,n=a.getElementByType(b,{id_type:j,id_value:m}))p++,l++;else{verbose_log("["+getmydocnum(b)+"] DID NOT FIND REQUIRED FIELD ty="+j+" val="+m);break}l<d.length&&(c=!0,g=null);if(g)for(h=0;h<e.length;h++)if(j=e[h].id_type,m=e[h].id_value,n=this.getElementByType(b,{id_type:j,id_value:m})){p++;q=1;verbose_log("["+getmydocnum(b)+"] FOUND REJECT FIELD "+m);c=g=!1;
break}else c=!0;for(h=0;h<k.length;h++)if(j=k[h].id_type,m=k[h].id_value,n=this.getElementByType(b,{id_type:j,id_value:m})){p++;r=1;verbose_log("["+getmydocnum(b)+"] FOUND INTERACTIVE FIELD "+m);c=!1;break}if(0===p&&(0<d.length||0<e.length))g=null;f&&(f.num_ok_matches=l,f.num_okfields=d.length,f.found_bad_match=q,f.num_badfields=e.length,f.do_retry=c,f.retval=g,f.url_success_match=!1,f.url_failure_match=!1,f.found_interactive=r,g_isdebug&&(set_innertext(f,LP_elt_get_text(b.body)),f.innerHTML=b.body.innerHTML));
return f};this.interrogate=function(b,a,d){if(a&&!(10<d)){var e=a.desc,g=a.proceed_on_interactive;"undefined"==typeof d&&(d=1);var h=b.readyState;(g?"complete"==h||"interactive"==h:"complete"==h)?g_cpwbot&&CPWbot_cs&&CPWbot_cs.interrogate_validate(b,a):(verbose_log("["+getmydocnum(b)+"] retry "+e+" in 500ms doc state is "+b.readyState),setTimeout(function(){CPWbot_cs.interrogate(b,a,d+1)},500))}};this.interrogate_validate=function(b,a,d){if(!a||10<d)return!1;if("undefined"==typeof d||null===d)d=1;
var e=a.desc,g=a.required_fields,h=a.rejected_fields,j=a.required_url,k=a.rejected_url,f=a.interactive_fields,p=a.id,l=a.validate_timeout,q=a.timestamp,q=((new Date).getTime()-q)/1E3;if("undefined"==typeof l||null===l)l=0;if(0<l&&d>=l/2E3)return verbose_log("terminate loop  ["+getmydocnum(b)+"] VT:"+l+" T:1000 ctr"+d+" elapsed time is "+q+" sec"),!1;verbose_log("WTF??  ["+getmydocnum(b)+"] VT:"+l+" T:1000 ctr"+d+" elapsed time is "+q+" sec");var r=CPWbot_cs.decode_fields_metainfo(g),m=CPWbot_cs.decode_fields_metainfo(h),
f=CPWbot_cs.decode_fields_metainfo(f);if(0===r.length&&0===m.length&&!k&&!j)return 0<f.length&&!0,verbose_log("["+getmydocnum(b)+"] warning: interrogate rcvd no inputs or urls to check against"),l=!0,sendBG({cmd:"cpwbot_validate_state_result",state:"STATE"+d,url:get_doc_location_href(b),docstate:b.readyState,desc:e,id:p,required_fields:g,rejected_fields:h,required_url:j,rejected_url:k,result_obj:CPWbot_cs.JSON.stringify(n),result:CPWbot_cs.JSON.stringify(l)},b),!0;var n=CPWbot_cs.validate_page_fields(b,
e,r,m,l,j,k,f);if(null===n)return null;l=n.retval;n.do_retry&&null===l?(verbose_log("["+getmydocnum(b)+"] ctr="+d+" elapsed="+q+" sec, validate_page_fields "+e+" retry in 1 second"),setTimeout(function(){var f=CPWbot_cs.interrogate_validate(b,a,d+1);f||(f=0===r.length&&0<m.length||0<r.length&&0<m.length&&0<n.num_ok_matches?!0:!1,sendBG({cmd:"cpwbot_validate_state_result",state:"STATE_TIMEDOUT",url:get_doc_location_href(b),docstate:b.readyState,desc:e,id:p,required_fields:g,rejected_fields:h,required_url:j,
rejected_url:k,result_obj:CPWbot_cs.JSON.stringify(n),result:CPWbot_cs.JSON.stringify(f)},b))},1E3)):(null===l&&(verbose_log("["+getmydocnum(b)+"] cpwbot_validate_state_result retval===null FIXME"),l=!1),sendBG({cmd:"cpwbot_validate_state_result",state:"STATE"+d,url:get_doc_location_href(b),docstate:b.readyState,desc:e,id:p,required_fields:g,rejected_fields:h,required_url:j,rejected_url:k,result_obj:CPWbot_cs.JSON.stringify(n),result:CPWbot_cs.JSON.stringify(l)},b));return!0};this.do_result_div=function(a,
c){if(!a||!g_isdebug)return!1;var d=a.getElementById("__lpresultdiv");if(!d&&a.body&&(d=a.createElement("div")))d.id="__lpresultdiv",d.style.left="-999px",d.style.position="absolute",a.body.appendChild(d);return LP_elt_set_text(d,c)};this.hide_result_div=function(a){if(!a)return!1;(a=a.getElementById("__lpresultdiv"))&&a.parentElement.removeChild(a);return!0};return!0}
function display_cpw_message_loop(a,b,c){if(a){if(null===b){if(null===a.getElementById("cpwmsg"))return;g_ischrome?chrome_runtime_sendMessage({cmd:"getcpwmsg"},function(b){b&&b.msg&&display_cpw_message(a,b.msg);1===b.minimize_state&&minimize_cpw_dialog(a)}):"undefined"!=typeof safari?(safari.self.removeEventListener("message",handleMessage,!1),safari.self.addEventListener("message",handleMessage,!1),safari.self.tab.dispatchMessage("getcpwmsg",{})):"undefined"!=typeof g_isfirefoxsdk&&g_isfirefoxsdk&&
window.parent.postMessage({messagetype:"getcpwmsg"},"*")}else display_cpw_message(a,b,c);setTimeout(function(){display_cpw_message_loop(a,null,null)},51)}}
function update_msgdiv_css(a,b,c,d,e){if(!a)return!1;b="position:absolute !important; visibility:visible !important;  border-style:transparent!important; border-width:1px !important; border-color:#4c4c4c !important; font-size:14px; font-family: Arial,Helvetica,sans-serif; height: "+b+" !important ; width: "+c+" !important; top:"+e+" !important; left:"+d+" !important; background-color: #e6e6e6; margin: 4px !important; border-radius: 4px; padding: 1px !important; overflow:auto;";if(a=a.getElementById("cpwmsg"))a.style.cssText=
b;else return!1;return!0}var OVERLAY_MESSAGE_WIDTH="500px",OVERLAY_MESSAGE_HEIGHT="200px",OVERLAY_MESSAGE_HEIGHT_MINIMIZED="70px",OVERLAY_MESSAGE_TOP="50px",OVERLAY_MESSAGE_LEFT="50px";
function display_cpw_message(a,b,c){if(a){var d=a.getElementById("cpwmsg");if(d)pass;else{d=a.createElement("div");d.style.width="100%";d.style.height=window.innerHeight+"px";d.style.opacity="0.7";d.style.backgroundColor="#666666";d.id="cpwbg";d.style.position="absolute";d.style.top="0px";d.style.left="0px";a.body.appendChild(d);var e;if(d=a.createElement("div")){d.id="cpwmsg";a.body.appendChild(d);update_msgdiv_css(a,OVERLAY_MESSAGE_HEIGHT,OVERLAY_MESSAGE_WIDTH,OVERLAY_MESSAGE_TOP,OVERLAY_MESSAGE_LEFT);
d.setAttribute("role","status");var g=a.createElement("div");g.style.cssText="height: 20px !important; padding: 2px 0px 0px 20px; background-color: #ffffff !important; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGQjdGMTE3NDA3MjA2ODExQkVEQ0Y4NkVBMzlCNDIwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRjA2MTdBMTU2REYxMURGQUNGOUQ1RDAwQTc4OEQzOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRjA2MTdBMDU2REYxMURGQUNGOUQ1RDAwQTc4OEQzOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA3ODAxMTc0MDcyMDY4MTFBQjA4RDY4QTAyQUEzMTc1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZCN0YxMTc0MDcyMDY4MTFCRURDRjg2RUEzOUI0MjBEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+1Gef5AAAA69JREFUeNpUVF1oXEUU/mbm7t67m82mdtsGUgXbB6tWC1WhoKh5UST0RapQ2kLJgxVSqsEfBCNaH8yLLyr1IbHFoLYPVmkfCv7giz+tVlRsrQRkC01MzDZm02Zzd+//Hb+ZpKiznJ17z8z55nzfOXeEXlJi5sv7X758pGcommtVlcohhBYS2swQnFeGQG7eNGcttJkDv+Pn/VPvPzy68JpofLHjwIWDG8aieh2KgQZA0aTO7TMR7dB6xXKhkK2CQks0uRbsmXnF+euztbuD+hSU5DLXDIjKQm7L4DgFOCaa/jzXSAhu0IQqI+ExGfeuzRXOnqnslVknVFrYpO2SQgxvcx9u+/Bt9L7+DHTWhJcuYv3uAWw5MwHv3q3MMsGNvDRNCu04BkSbk4xDp5AesOWT91Dbfjci34c/dgzu7J/oGxlG5c7b0fPQDpzd1g99pQEpS0iplZSaJCksLOOc9HIUgmtYePcoDLRbqaB3+GmU9+9BF0HMaEycQD71BxwpLH2sZCScVCcis2F0Zi0UECE+9g6aj/Wj9sTjqD01iCxObO1aF3/D/HMvoFu3mQmQosfAICUrJ80zBNSl4Eps3DeILreAov834slJxMlOyFIZqsQgiuxfuIja3l1Q1Q2Iix7qx0+h3WgSiBlpaGbEn+di3ciz8G7ZiDxJoaMYrcVF/HcUdg5gzZO7KDZLwwR+/+prxI0Gs9VwjNQMQ0Z2c1PTEMstwACFIbRS/wMSaQrhuuwRxRaQSEh5RSXAySxXiagTYOb5w3C5VOksoPTAg5CHhqgbt9oGI+inpxAf/wh+uYZ2wUN7epa7C6QdEYhli6l/aE77+ScDCe24KIwOAKSLuQbAQ8SmW4FHH8HS+ATS+nmq2sUolp9ACbmxnykHqZlejkQJgSjCfelFePdth1cuI/zgBPzRN1EseXBv7kPljcO4XlyDUHiI+blEpLUCxL/QfC80n5Vped3AXXegq1qFnp3D9MnTmP/uW8Q//oJKrcau34Sldb24pjN0GGNiY200yqWIzUdpO0khDRJ8v38Imwf3IWk2Mb98HRX6L781jtlfL2HyyDiiVpsSuLarU5MRs3HiJEn/BTLCKzpZ2rExew94qFr/4rnz8M99Y3URBDG6pqsVC/kg12+98nGHrwkXjBmtAgIk6KaXmvHsZVobRYZUrbhmT7x68FXuuume8HMRXIUcH668+sPJ0kE3Q7e5foS9l+ztYQ2rGd8wXmx27mgdO9uC0yNH24f+EWAAmnbJJ+zxvWgAAAAASUVORK5CYII=); background-repeat:no-repeat; background-position: left top;background-attachment: scroll;";
g.style.fontWeight="bold";g.id="cpwtitle";g.addEventListener("click",function(){toggle_cpw_dialog(a);return!1},!1);e=a.createElement("div");e.id="msgbody";e.style.fontSize="18px";e.style.padding="4px";var h=a.createElement("div");h.style.padding="4px";var j=a.createElement("span"),k=a.createElement("span");k.style.display="inline-block";k.style.marginLeft="3px";k.style.marginRight="3px";var f=a.createElement("span");c?g_isfirefox?(f.textContent=c,k.textContent="|"):(set_innertext(f,c),set_innertext(k,
"|")):(k.style.display="none",f.style.display="none");c=gs("LastPass Automatic Password Change");g_isfirefox?j.textContent=c:set_innertext(j,c);g.appendChild(j);g.appendChild(k);g.appendChild(f);d.appendChild(g);h.style.marginTop="5px";h.style.marginBottom="5px";h.style.fontSize="12px";h.style.fontStyle="italic";c=gs("Please do not close this window, while LastPass changes your password.");g_isfirefox?h.textContent=c:set_innertext(h,c);d.appendChild(h);d.appendChild(e)}}e||(e=a.getElementById("msgbody"));
e&&(g_isfirefox?e.textContent=b:set_innertext(e,b))}}function cpw_hide_overlay(a){if(!a)return!1;g_isfirefox||(a=a.getElementById("lpiframeoverlaycpwmsg"))&&a.parentNode.removeChild(a);return!0}function toggle_cpw_dialog(a){if(!a)return!1;var b=a.getElementById("msgbody");if(a.getElementById("cpwmsg")&&b)"none"==b.style.display?(maximize_cpw_dialog(a),maximize_cpw_bg()):(minimize_cpw_dialog(a),minimize_cpw_bg());else return!1;return!0}
function maximize_cpw_dialog(a){if(!a)return!1;var b=OVERLAY_MESSAGE_TOP,c=OVERLAY_MESSAGE_LEFT,d=OVERLAY_MESSAGE_WIDTH,e=OVERLAY_MESSAGE_HEIGHT,g=a.getElementById("msgbody");return a.getElementById("cpwmsg")&&g?("block"!=g.style.display&&(update_msgdiv_css(a,e,d,b,c),g.style.display="block"),!0):!1}
function minimize_cpw_dialog(a){if(!a)return!1;var b=OVERLAY_MESSAGE_TOP,c=OVERLAY_MESSAGE_LEFT,d=OVERLAY_MESSAGE_WIDTH,e=OVERLAY_MESSAGE_HEIGHT,g=a.getElementById("msgbody");return a.getElementById("cpwmsg")&&g?("none"!=g.style.display&&(e=OVERLAY_MESSAGE_HEIGHT_MINIMIZED,update_msgdiv_css(a,e,d,b,c),g.style.display="none"),!0):!1}
function do_cpw_overlay_handler(a,b){if(CPWbot_cs&&CPWbot_cs.JSON&&a&&a.msg){var c=CPWbot_cs.JSON.parse(a.msg);if(c){var d=encodeURIComponent(c.symbolic);g_isfirefox?(lpShowOverlay(b,0,c.msg),lpSetOverlayStatus(b,""),lpisadmin&&do_cpw_debug(b)):(c=encodeURIComponent(c.msg),verbose_log("show overlay msg="+c),showoverlay(a,"&cpwbot="+c+"&symbolic="+d))}else verbose_log("failure, !msg")}}
function ping_req_handler(a,b){var c=(new Date).getTime(),d=0;"undefined"!=typeof b.timestamp&&b.timestamp&&(d=c-b.timestamp);var e="";try{e=punycode.URLToASCII(a.location.href)}catch(g){}sendBG({cmd:"ping_ack",timestamp:c,delta:d,id:b.id,url:e,docstate:get_docstate(a),flags:assemble_docflags_object(a)},a)}function get_docstate(a){return!a?null:"undefined"!=typeof a.readyState&&a.readyState?a.readyState:"undef"}
function assemble_docflags_object(a){return!a?null:{is_special_site:g_is_specialsite,in_cpwbot:g_in_cpwbot,tutorial_flags:g_tutorial_flags,need_dynamic_delay:g_need_dynamic_delay,has_frameset:0<a.getElementsByTagName("FRAMESET").length}}
function run_custom_js(a,b){try{if(""!=b){var c=lp_gettld_url(a.location.href);if(!(("facebook.com"==c||"live.com"==c||"outlook.com"==c)&&0==a.getElementsByTagName("form").length)){b=b.replace(/lpcurrpage./g,"");b="try{"+b+"}catch(e){}";var d=a.createElement("script"),e=a.createTextNode(b);d.appendChild(e);a.body&&a.body.appendChild(d)}}}catch(g){}}function do_result_div_handler(a,b){g_isdebug&&CPWbot_cs&&CPWbot_cs.do_result_div(a,b.msg);return!0}
function hide_result_div_handler(a){g_isdebug&&CPWbot_cs&&CPWbot_cs.hide_result_div(a);return!0}function need_dynamic_delay(a){if(!a)return!1;var b=LP_elt_get_text(a.head);return 0<=LP_elt_get_text(a.body).indexOf("\x3c!-- ko")||0<=b.indexOf("require")||0<=b.indexOf("lazyload")?!0:!1}
function minimize_cpw_bg(){g_ischrome?chrome_runtime_sendMessage({cmd:"minimize_cpw_dialog"},function(){pass}):"undefined"!=typeof safari?safari.self.tab.dispatchMessage("minimize_cpw_dialog",{}):"undefined"!=typeof g_isfirefoxsdk&&g_isfirefoxsdk&&window.parent.postMessage({messagetype:"minimize_cpw_dialog"},"*")}
function maximize_cpw_bg(){g_ischrome?chrome_runtime_sendMessage({cmd:"maximize_cpw_dialog"},function(){pass}):"undefined"!=typeof safari?safari.self.tab.dispatchMessage("maximize_cpw_dialog",{}):"undefined"!=typeof g_isfirefoxsdk&&g_isfirefoxsdk&&window.parent.postMessage({messagetype:"maximize_cpw_dialog"},"*")}function get_doc_location_href(a){try{return a.location?a.location.href:""}catch(b){return""}}
function getmydocnum(a){if(g_isfirefox){a||(a=LP_derive_doc());if(!a)return 0;if("undefined"==typeof a.g_docnum){var b=lpGetBrowserForDocument(a),c=get_tabid_from_browser(b);if(!c)return console_error("did not found matching tab for given tabid, bail"),0;ff_setdocnum_conditional(a,c);b.contentDocument==a&&(g_CS_tops[c]=a.g_docnum)}return a.g_docnum}return g_docnum};
