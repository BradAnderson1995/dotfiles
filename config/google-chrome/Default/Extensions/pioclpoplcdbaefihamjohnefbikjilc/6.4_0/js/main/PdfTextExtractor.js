/*! Copyright 2009-2015 Evernote Corporation. All rights reserved. */
function takePortionOfPage(a,b){return 0>b?"":" "==a[b]||"undefined"==typeof a[b]?" "+a.slice(0,b):takePortionOfPage(a,b-1)}importScripts("../../third_party/pdfjs/cidmaps.js"),importScripts("../../third_party/pdfjs/core.js"),importScripts("../../third_party/pdfjs/image.js"),importScripts("../../third_party/pdfjs/evaluator.js"),importScripts("../../third_party/pdfjs/fonts.js"),importScripts("../../third_party/pdfjs/glyphlist.js"),importScripts("../../third_party/pdfjs/obj.js"),importScripts("../../third_party/pdfjs/crypto.js"),importScripts("../../third_party/pdfjs/parser.js"),importScripts("../../third_party/pdfjs/pdf.js"),importScripts("../../third_party/pdfjs/jpg.js"),importScripts("../../third_party/pdfjs/jpx.js"),importScripts("../../third_party/pdfjs/jbig2.js"),importScripts("../../third_party/pdfjs/stream.js"),importScripts("../../third_party/pdfjs/colorspace.js"),importScripts("../../third_party/pdfjs/util.js"),importScripts("../../thrift/gen/Limits_types.js"),importScripts("../GlobalUtils.js"),addEventListener("message",function(a){for(var b=new PDFDocument(new Stream(a.data.pdf),null),c=b.numPages,d="",e=Math.floor(EDAM_RELATED_PLAINTEXT_LEN_MAX/c),f=0;c>f;f++)d+=takePortionOfPage(GlobalUtils.removePunctuation(b.getPage(f+1).extractTextContent().bidiTexts).replace(/\s+/g," ").trim(),e);postMessage({type:"recommendationText",message:d})},!1);